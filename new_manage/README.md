#### 设计文档

**设计思想**

本次设计基于文件系统，数据均以文本文件(包括账户信息、课程信息、学生上交作业、学生选课信息等)形式存储，通过目录的分级进行数据的关联和管理。层层展开、逐级而上。脚本程序，采用菜单界面的模式，提供完整的帮助信息，通过函数调用来实现相应功能的跳转。程序实现的重点在于目录的组织结构设计，以及文本文件的某些字段的设计。程序实现的难点在于文本的处理。对文本的某些处理需要对sed，awk，cut命令以及正则表达式有较为深刻的理解。整个程序的组织分为4模块，main.sh，admin.sh，teacher.sh，user.sh。通过main.sh是程序的入口。其他的三个sh文件提供了必要的功能函数。

**功能模块**

如前所述，程序主要是由三大功能模块组成(学生、教师、管理员)，这三大模块提供了相应用户登陆的入口，以及对应的功能窗口。还有一个main.sh模块为程序的唯一入口，提供了欢迎菜单界面，利用source命令将其他的模

块包含进来。随后，根据用户选择的不同，分别进入不同模式的登陆界面，完成相应功能。admin.sh模块是管员管理函数模块，该模块包含了所有的与管理员功能相关的函数。完成了需求文档中的所有基本内容。Teacher.sh

与student.sh和前面的admin.sh类似，分别实现了教师用户和学生用户的基本功能。

**数据结构与算法**

本项目没有过于复杂的数据结构，也基本没有用到数据结构，这是由于shell本身也不适合数据结构的表示。Shell最强的是文本处理能力，本次实验也充分的利用到了他的这一能力，使用了sed、awk、cut等命令。算法也并没有特别的突出，使用了一种流程控制算法，实现了界面之间的跳转。正则表达式的理解也十分重要。



**文件组织结构**

文件组织结构是我认为本实现最为繁琐的事情。我们知道，在计算机中，要表达一个内容的方式实在是太多样了。在此处也是如此。如果文件的表达过于随意会导致代码中出现大量的冗余，从而影响阅读者的观感和自己写代码的舒畅度，也不利于文件系统存储数据的数据一致性保持。

本实验的文件结构如下所示。Account文本文件用于存储账户信息，包括管理员、教师和学生的信息，其字段分别为账号，姓名，密码，人员类别，其中管理员的账号为0，密码为123456，其他用户的密码默认和账号相同，同时，除了admin外，所有用户的账号应该是等长的，这里为方便表示，设置账号长度为3。Course文本文件用于存储课程信息，包括课程ID和课程的名字。Course_teacher为课程和老师的绑定目录，其后的002_002表示的是已经绑定了的一个课程ID-老师ID。其下的course_info目录存储该课程的相关信息，每一条课程信息都是一个文本文件，名字可以自行定义(在添加的模块中-会有时间显示，在使用的时候可以按时间排序，获取最新的课程信息)。其下的homework目录，存储该课程的所有作业目录，homework下的myhomework是具体的一个作业，其中包含了作业的详细说明，学生也可在这个目录下上传文件。student_info文件存储了选择该老师课程的学生ID。Take目录中的每一个文件的文件名是学生的ID，表示了该学生的选课情况，字段为课程ID，老师ID。

<img src="C:\Users\Dell\AppData\Roaming\Typora\typora-user-images\image-20200812192803669.png" alt="image-20200812192803669" style="zoom:67%;" />



**不足之处**

​    由于时间有限，本项目还是有很多的不足之处的，也是希望自己能逐步提高，因此在此表明。1. 自己的代码组织还是存在一定的冗余的，不是说冗余一定是不好的，但自己写的很多代码冗余信息略微偏多。2. 由于没有采用DBMS作为底层的存储管理系统，基于文件系统的数据存储有很大的漏洞，这在我们自己写代码的时候是很难把握的，很可能由于某些原因造成数据的混乱与不一致。3. 仅仅是命令行的窗口是不够的，这个系统要真正能够使用，必须添加一些GUI和Web相关的内容，真正的实现远非这么点代码能够完成。自己也几乎没有接触过GUI设计，应该在接下来通过这个项目进一步提高。4. 对应字段的名字不能有空格，当然这对于中文姓名来说不会出现。英文的话也只能连接在一起。5. 缺少进一步的文本输入校验，很可能出现意想不到的错误。程序的成功执行还需要使用者的正确输入，这对使用者来说十分不友好，但深入的文本处理难度略大，没有足够完善好。